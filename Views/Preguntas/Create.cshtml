@model puceAsk_dev1.Models.PreguntasManager

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm("Create", "Preguntas", FormMethod.Post, new { id = "NuevaPregunta", enctype = "multipart/form-data", name = "Crear" }))
{
    @Html.AntiForgeryToken()

<div class="form-horizontal">
    <h4>Pregunta</h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="form-group">
        @Html.LabelFor(model => model.pregunta.TituloPregunta, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.pregunta.TituloPregunta, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.pregunta.TituloPregunta, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.pregunta.DescPregunta, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.pregunta.DescPregunta, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.pregunta.DescPregunta, "", new { @class = "text-danger" })

        </div>
    </div>


    <div class="form-group">
        @Html.LabelFor(model => model.pregunta.Categoria, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DropDownListFor(model => model.pregunta.CategoriaId, new SelectList(ViewBag.categorias, "CategoriaId", "NombreCategoria", "Seleccionar"), new { htmlAttributes = new { @class = "form-control" } })
        </div>
    </div>


    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input id="enviar" type="submit" value="Agregar pregunta" class="btn btn-default" on="return publicar()" />
        </div>
    </div>
</div>
}

<div>
    <a href="javascript:void(0);" onclick="history.go(-1);">Regresar</a>
</div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#enviar").click(function (e) {
                e.preventDefault();
                swal({
                    title: "¿Seguro que deseas publicar esta pregunta?",
                    text: "Una vez la publiques, perderas 10 puntos.",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                })
                    .then((aceptar) => {
                        if (aceptar) {
                            swal("Pregunta Publicada!", {
                                icon: "success",
                            });
                            $("#NuevaPregunta").submit();
                        } else {
                            swal("Ahorrar puntos siempre es una buena idea.", {
                                icon: "info",
                            });
                        }
                    });
                
                return false;
            });
        });

    </script>

}
