@model IEnumerable<puceAsk_dev1.Models.Pregunta>


<div class="container">
    <div class="col" align="right">
        @Html.ActionLink("Agregar pregunta", "Create", null, new { @class = "link-button" })
    </div>

    <div>
        @if (Model.Count() > 0)
        {

            foreach (var item in Model)
            {

                <div class="card" style="margin-top: 20px">                   
                        <div class="card-header titulo">
                            <h4>
                                <div class="container">
                                    <div class="row">
                                        <div class="col">
                                            @Html.DisplayFor(modelItem => item.TituloPregunta)
                                        </div>
                                        <div class="col">
                                            <div class="row">
                                                <span class="badge badge-pill badge-info">@item.Respuestas.Count() Respuestas.</span>
                                            </div>
                                            @if (item.MejorRespuestaId == null)
                                            {
                                                <div class="row">
                                                    <span class="badge badge-pill badge-danger">Mejor Respuesta no asignada</span>
                                                </div>
                                                <div class="row">
                                                    <span class="badge badge-pill badge-warning">Te quedan @((item.Fechapregunta.AddDays(10) - DateTime.Now).Days) dias.</span>
                                                </div>
                                            }
                                            @if (DateTime.Now < item.Fechapregunta.AddDays(5))
                                            {
                                                <div class="row">
                                                    <span class="badge badge-primary">Abierta</span>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row">
                                                    <span class="badge badge-secondary">Cerrada</span>
                                                </div>
                                            }
                                        <div class="col">
                                            <a href="@Url.Action("Edit", "Preguntas", new { id = item.PreguntaId })" class="btn btn-primary btn-sm"> Editar</a>
                                            <a href="@Url.Action("Details", "Preguntas", new { id = item.PreguntaId })" class="btn btn-secondary btn-sm"> Ver</a>
                                        </div>
                                        </div>                                     
                                    </div>
                                </div>
                                                        
                            </h4>

                        </div>

                        <div class="card-body pregunta">
                            <p class="lead preg">@Html.DisplayFor(modelItem => item.DescPregunta)</p>
                            <hr>
                            <p class="detalles">
                                @Html.DisplayFor(modelItem => item.Fechapregunta) |
                                @if (item.Categoria != null)
                                {
                                    @Html.DisplayFor(motelItem => item.Categoria.NombreCategoria)
                                }

                            </p>
                            <p class="detalles">
                                Autor: @Html.DisplayFor(modelItem => item.Usuario.Nombre)
                            </p>

                        </div>
                  
                </div>
            }
        }
        else
        {
            <div class="card pregunta">
                No se han encontrado preguntas.
            </div>
        }

    </div>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Categoria.NombreCategoria)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Usuario.UserName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.RowVersion)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TituloPregunta)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DescPregunta)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Fechapregunta)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Categoria.NombreCategoria)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Usuario.UserName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RowVersion)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TituloPregunta)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DescPregunta)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Fechapregunta)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.PreguntaId }) |
                    @Html.ActionLink("Details", "Details", new { id = item.PreguntaId }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.PreguntaId })
                </td>
            </tr>
        }

    </table>
</div>

<style>
    .pregunta {
        background-color: darkcyan;
        padding: 10px !important;
    }

    .titulo {
        color: white;
        background-color: #006666;
        color: ghostwhite;
    }

    .preg, .enlaces {
        color: ghostwhite;
    }

    .respuesta {
        left: 5%;
        border: solid 1px;
        border-color: darkcyan;
        padding: 10px !important;
        margin-top: 15px;
        width: 95%;
    }

    .categorias {
        list-style: none;
    }

    .link-button {
        -moz-border-radius: 0.333em 0.333em 0.333em 0.333em;
        -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4);
        background-color: #FFBB33;
        border-color: #FFBB33;
        border-style: solid;
        border-width: 1px;
        color: white;
        cursor: pointer;
        display: inline-block;
        font-size: 1.167em;
        font-weight: bold;
        line-height: 1.429em;
        padding: 0.286em 1em 0.357em;
        text-decoration: none !important;
    }

    .enlaces {
        text-decoration: none !important;
    }

    .ver {
        text-decoration: none;
        color: #212529;
    }

    .enlaces:hover {
        color: white;
    }

    .card:hover {
        transform: scale(1.05);
        background: #fff;
        box-shadow: 0px 15px 26px rgba(0, 0, 0, 0.50);
        /box-shadow: 0px 15px 26px rgba(0, 0, 0, 0.50);
        / -webkit-transition: all 0.2s ease-in;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
        margin-top: 50px;
    }

    .detalles {
        color: black;
    }

    .enlace {
        text-decoration: none !important;
        color: black;
    }

    .list-group-item.list-group-item-action.active {
        background-color: darkcyan;
        border-color: cyan;
    }

    .list-group-item:hover {
        transform: scale(1.05);
        background-color: darkcyan;
        color: white;
        border-color: cyan;
        -moz-transition: all 0.2s ease-in;
        -ms-transition: all 0.2s ease-in;
        -o-transition: all 0.2s ease-in;
        transition: all 0.2s ease-in;
    }
</style>

